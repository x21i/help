chap 2 and 3 :

Contain all files
ls /etc/fstab
configuration file for grub2
/boot/grub/grub.cfg
To view the config.file of grub (with more details):
cat /boot/grub/grub.cfg | more
to view first 10 lines:
head -n 10 /etc/initramfs-tools/initramfs.conf
 to see the bottom:
tail -n 10 /etc/initramfs-tools/initramfs.conf
fsck :used for boot process, checking the disk, correct errors,can return 
and response output it can be 0,1,2,3,
creating file
initramfs.conf
to check the partitions and hard disk:
fdisk -l==long format 
to create partition for specific disk:
1)fdisk /dev/sdb,a,c,...
2)m
3)n (new disk) (1)(1-4 =for extended or primary) (5-8= for logical partition)
4)e (extended)
5)to add ssector:
in last sector we add: +10000M ==> 1Gb
6)print
7)w:to save 
to check details for specific disk/check size of disk:
fdisck -l /dev/sdd
fdisk -l ==> check the size and name of parti..
creating f.s:
mkfs.ext4 /dev/sdb1,2,..(partion name)
to attach new file under exiting partition/Make a newly created logical 
partition usable to the uses:
mkdir dir(create name of dir)
mount /dev/sdb1,2,...(partion name) /root/dir(name of dir) ==>we have to 
mount
to check mount plces:
df -h
to increase the system function use : swap
create swap:
mkswap /dev/sdb5 (partition) ==> it will show warning.
to active the swap : swapon /dev/sdb5
to turn off : swapoff /dev/sdb5
if disk is full we stop the swap: mkfs.ext4 /dev/sdb5
mount /dev/sdb5 /root/dir (name of dir)
to convert/return it to swap:
unmount /root/dir
mkswap /dev/sdb5
swapon /dev/sdb5
to check file system disk:
fsck /dev/sdb5
fisr we do :mkfs.ext4 /dev/sdb5
y
then :fsck /dev/sdb5

Chapter4:
1. Pvcreate /dev/sdb2 /dev/sdb3
2. Pvdisplay
3. Vgcreate “mygroup” /dev/sdb2 /dev/sdb3
4. Vgdisplay
5. Lvcreate -n “myvol” –size 10GB /dev/mygroup
6. Lvdisplay
7. Mkfs.ext4 /dev/mygroup/myvol
8. Mkdir zahdir
9. Mount /dev/mygroup/myvol /root/zahdir
10. Lvextend -L +5G /dev/mygroup/myvol
11. Resizefs /dev/mygrpup/myvol

Chapter 5 IP

Change ip 
#ifconfig enp0s3 (new ip) netmask 255.255.0.0
#ping 172.16.0.50
#ctrl +c > cancel
disable/enaple
#ifconfig enp0s3 down
#ifconfig enp0s3 up
show all i/f
#ifconfig -a
Gateway
for default n/w:
#route add 0.0.0.0 gw 10.0.2.1(IP)
#route add default gw 10.0.2.1(IP)
Add specific n/w:
#route add -net 10.0.2.0 netmask 255.255.255.0 gw 
10.0.2.1
Delete /remove specific n/w:
#route del -net 10.0.2.0 netmask 255.255.255.0 gw 
10.0.2.1
routing table
#route -n
get all info about command 
#man route
#man ifconfig
to change ip manually: trun off dhcp:
cat /etc/netplan/50-cloud-init.yam1
vi /etc/netplan/50-cloud-init.yam1
i
make it false
iwq

Chapter 6 backup

Options:
-c (create bkup)
-x (restore)
-f (file)
-v(verbos mode)-name of files that take as bkup/list of files 
-p(preseve per/permission)
-z (zip)
to create backup:
tar -c(other option) filenamebkup.tar source
to make bkup in spesific folder
ex:
#mkdir imdata
==>copy same files from etc into this folder
#cp /etc/*.conf /root/imdata/
==>to check
#ls /root/imdata/ 
==> to copy for loop
#cp /dev/loop* /root/imdata/ 
==> to check the backup
#ls /root/imdata/ 
to make bk up:
#tar -cpvf mybackup.tar /root/imdata/*
==> red color mybkup.tar (mean 1 bkup is created)
#ls
if i want to see the list of file as bkup +no list for process
#tar -cpf 2mybkup.tar /root/imdata/*
if i don't want to take permission:
#tar -cf 3mybkup.tar /root/imdata/*
if i do ls -l: i will see many backup files الحجم .مع
#ls -l 
if i want to comprese the file of backup:
#tar -cpvzf mybkup.tar.gz /root/imdata/*
if i want to see size of compere the size:
#ls -l
remove data folder:
#rm -rf impData/
to check:
#ls /root/impData
-to retrive/restore the data from the bkup:
#cd ..
#tar -xpvf /root/mybkup.tar
to check the data that is restored:
#cd /root/
#ls -l /root/impData/
to make files:
#cat > abc.txt
jskdnakjsdnj
^d
show abc.txt
#ls -l 
make new bkup file with standard format:it will specify date and time (descripte date and time)u have 
bkup until 1pm
#tar -cf confbkup_10032021_01pm.tar /root/imdata/*
#ls -l

Chapter 7

DNS
Install DNS serve:
#Apt-get install bind9
(If there is any error change the network to NAT
then install again)
Check service (running/active)
#Systemctl status bind9
To stop running service
#Systemctl stop bind9
Ran the service 
#Systemctl start bind9
Check the file 
#ls /etc/bind
(named.conf.options)
View the file 
#cat /etc/bind/ named.conf.options
Edit the file 
#vi /etc/bind/ named.conf.options
Go to 
//forwarders {
//8.8.8.8; //};
Delete all // and change 8.8.8.8 to 0.0.0.0 
Then save (ESC then shift; then wq) 
Restart DNS server
#Systemctl restart bind9
Check the query time(sec) from google /getting 
response from DNS cache 
#dig google.com (and notice the time it takes for the 
query, next time it will be less because it’s already 
saved)
Apache (HTTP server)
Install Apache serve: (first update, upgrade)
#Apt-get install apache2
To list app
#ufw app list
Check the status of firewall
#ufw status
Enable firewall
#ufw enable
Allow Apache packet
#ufw allow ‘Apache’
#ufw status
Start Apache 
#Systemctl start apache2
Stop Apache 
#Systemctl stop apache2
Restart Apache (if you made change in on place 
,first it will stop the service then start it will load 
again and it will take long time ,it is not good idea)
#Systemctl restart apache2
Reload Apache (only restart the place where we 
change only )
#Systemctl reload apache2
Check if Apache start 
#Systemctl status apache2 
Check the IP address (network should be bridge)
#ifconfig (put the IP in the browser) 
The web page is stored in
#ls /var/www/html/
Create newvi page 
# vi var/www/html/mypage.html
Press i (so you can start writing)
Go to browser
IP Adress /mypage.html
# vi var/www/html/page2.html
# vi var/www/html/page3.html
To copy the index page 
#Cp / var/www/html/index.html /var/www/html/index1.html
To check 
#ls /var/www/html
To delete 
# rm var/www/html/index.html
#ls /var/www/html
To rename 
#mv / var/www/html/mypage.html /var/www/html/index1.html
NFS server
Step1: install NFS server
#apt-get update 
#apt-get upgrade 
#apt install nfs-kernel-server
Step2: Create NFS export Dir
#Mkdir -p /mnt/nfs_shareDir
#Chown -R nobody:nogroup /mnt/nfs_shareDir
#Chmod 777 /mnt/nfs_shareDir
Step3: Grant NFS access to the client
#vi /etc/exports
Press i
/mnt/nfs_shareDir 192.168.100.0/24 
(rw,sync,no_subtree_check)
The n/w of Linux server 
To save (ESC then shift; then wq)
Step4: Export NFS Dir
#Exportfs -a 
(if there is any error do systemctl restore nfs-kernelserver)
Step5: Allow NFS 
#ufw allow from 192.168.100.0/24 to any port nfs
#ufw enable
#ufw status
History >config.txt
Tail -05 config.txt
NFS client
Step1: install NFS server
#apt-get update 
#apt-get upgrade 
#apt install nfs-common
Step2: Create Dir
#mkdir -p /mnt/nfs_client
Step3: check the IP address of server
#ifconfig 
(192.168.100.64)
Step4: map
#mount 162.168.100.64:/mnt/nfs_shareDir /mnt/nfs_client
Step5: testing
#cd /mnt/nfs_client
#echo “working with nfs server” >filefromclient
(if you get deny you have to go to the server and 
write this commands
#Chown -R nobody:nogroup /mnt/nfs_shareDir
#Chmod 777 /mnt/nfs_shareDir
#systemctl restart nfs-kernel-server)
Go to client and type 
#ls /mnt/nfs_shareDir
Then 
#cd ..
Go to server 
#systemctl stop nfs-kernel-server
Go again to client
#ls /mnt/nfs_shareDir
(You will notice that you’re not able to enter. that’s 
mean everything is happen in sever even when you 
work in client)
To check the list of file you have created 

Chapter 8
DHCP Server Configuration 
Step 1: Installing DHCP Server 
apt-get update apt-get upgrade 
apt-get install isc-dhcp-server 
Step 2: Take a backup of .conf file 
cp /etc/dhcp/dhcpd.conf /etc/dhcp/dhcpd.conf.backup
Step 3: Modify .conf file as per your requirement
vi /etc/dhcp/dhcpd.conf 
# Make following changes 
default-lease-time 600; max-lease-time 7200; 
# Make authoritative enable if the current server is the main DHCP for the 
network
authoritative;
# Create pool of IP’s
subnet 192.168.50.0 netmask 255.255.255.0 { range 
192.168.50.50 192.168.50.100; # Add Default Router 
information option routers 192.168.50.1; option subnetmask 255.255.255.0; # Add Default DNS information 
option domain-name-servers 192.168.50.1, 8.8.8.8; 
} 
Step 4:
systemctl restart isc-dhcp-server systemctl 
status isc-dhcp-server
Step 5: Assign Fix IP Address: 
Vi /etc/dhcp/dhcpd.conf # 
Add system details 
host windows7-pc { hardware ethernet 
00:0c:29:e6:75:b9; fixed-address 192.168.50.20; 
} 
systemctl restart isc-dhcp-server 
Step 6: Verify Clients Lease: 
dhcp-lease-list 

Chapter 9: Iptables
Display rules all rules with the rule number.
#iptables –list --line-numbers
Display rules from mangle table.
#iptables –t mangle --list 
Display rules from filter table
#iptables –t filter --list
Add a rule to stop incoming packets for HTTP for entire network.
#iptables –A INPUT -p tcp --dport 80 –j DROP
Add a rule in mangle table to stop outgoing packets for SMTP for entire network.
#iptables –t mangle –A OUTPUT –p tcp –dport 25 –j DROP
To backup iptables in file called myrules.v4, Save firewall rules in a file named 
“my_rules.txt”.
#Iptables-save > /var/myrules.v4
Delete all rules from your firewall.
Iptables –f
. Restore firewall from your backup file.
#Iptables-restore > /var/myrules.v